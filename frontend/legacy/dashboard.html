<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin Dashboard - VOIP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<body class="bg-slate-900 text-slate-100">
  <div class="d-flex" style="min-height: 100vh;">
    <!-- Sidebar -->
    <aside class="bg-slate-950 text-slate-100 p-3" style="width: 260px;">
      <h2 class="text-xl font-bold mb-4 px-2">VOIP Admin</h2>
      <ul class="nav flex-column" id="sidebarNav">
        <li class="nav-item">
          <a class="nav-link active sidebar-link" data-target="numbersSection" href="#">Phone Number Order</a>
        </li>
        <li class="nav-item">
          <a class="nav-link sidebar-link" data-target="voiceSection" href="#">Voice Call</a>
        </li>
        <li class="nav-item">
          <a class="nav-link sidebar-link" data-target="smsSection" href="#">SMS</a>
        </li>
      </ul>
    </aside>

    <!-- Main content -->
    <div class="flex-grow bg-slate-900">
      <!-- Top bar -->
      <header class="d-flex justify-content-between align-items-center border-bottom border-slate-700 px-4 py-3">
        <div>
          <h1 class="h4 mb-0">Dashboard</h1>
          <small id="userInfo" class="text-slate-400"></small>
        </div>
        <div class="d-flex align-items-center gap-3">
          <div class="position-relative">
            <button class="btn btn-outline-light btn-sm" id="notificationsButton">
              <span class="me-1">Notifications</span>
              <span class="badge bg-danger" id="notificationsBadge" style="display:none;">0</span>
            </button>
            <div id="notificationsDropdown" class="dropdown-menu dropdown-menu-end p-2" style="max-height: 300px; overflow-y: auto;">
              <p class="text-muted small mb-0">No notifications</p>
            </div>
          </div>
          <button class="btn btn-outline-light btn-sm" id="logoutButton">Logout</button>
        </div>
      </header>

      <main class="p-4">
        <!-- Phone Number Order -->
        <section id="numbersSection">
          <h2 class="h5 mb-3">Phone Number Order</h2>
          <div class="row g-3 mb-3">
            <div class="col-md-4">
              <label class="form-label">Select Country</label>
              <select class="form-select" id="countrySelect"></select>
            </div>
            <div class="col-md-2 d-flex align-items-end">
              <button class="btn btn-primary w-100" id="searchNumbersButton">Search</button>
            </div>
          </div>
          <div class="table-responsive">
            <table class="table table-dark table-striped align-middle" id="numbersTable">
              <thead>
                <tr>
                  <th>Phone Number</th>
                  <th>Country</th>
                  <th>Monthly Cost</th>
                  <th>Capabilities</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </div>
        </section>

        <!-- Voice Call -->
        <section id="voiceSection" class="d-none">
          <h2 class="h5 mb-3">Voice Call</h2>
          <div class="row g-4">
            <div class="col-md-4">
              <div class="card bg-slate-800">
                <div class="card-body">
                  <h5 class="card-title">Dialpad</h5>
                  <div class="mb-3">
                    <input type="text" id="dialInput" class="form-control" placeholder="Enter number" />
                  </div>
                  <div class="grid grid-cols-3 gap-2 mb-3">
                    <button class="btn btn-outline-light dial-btn" data-digit="1">1</button>
                    <button class="btn btn-outline-light dial-btn" data-digit="2">2</button>
                    <button class="btn btn-outline-light dial-btn" data-digit="3">3</button>
                    <button class="btn btn-outline-light dial-btn" data-digit="4">4</button>
                    <button class="btn btn-outline-light dial-btn" data-digit="5">5</button>
                    <button class="btn btn-outline-light dial-btn" data-digit="6">6</button>
                    <button class="btn btn-outline-light dial-btn" data-digit="7">7</button>
                    <button class="btn btn-outline-light dial-btn" data-digit="8">8</button>
                    <button class="btn btn-outline-light dial-btn" data-digit="9">9</button>
                    <button class="btn btn-outline-light dial-btn" data-digit="*">*</button>
                    <button class="btn btn-outline-light dial-btn" data-digit="0">0</button>
                    <button class="btn btn-outline-light dial-btn" data-digit="#">#</button>
                  </div>
                  <div class="mb-3">
                    <input type="text" id="fromNumberInput" class="form-control" placeholder="From number (your Telnyx number)" />
                  </div>
                  <button class="btn btn-success w-100" id="callButton">Call</button>
                  <p id="callStatus" class="small mt-2 text-slate-300"></p>
                </div>
              </div>
            </div>
            <div class="col-md-8">
              <h5>Call Logs</h5>
              <div class="table-responsive">
                <table class="table table-dark table-striped" id="callLogsTable">
                  <thead>
                    <tr>
                      <th>From</th>
                      <th>To</th>
                      <th>Status</th>
                      <th>Direction</th>
                      <th>Duration</th>
                      <th>Time</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>
        </section>

        <!-- SMS -->
        <section id="smsSection" class="d-none">
          <h2 class="h5 mb-3">SMS</h2>
          <div class="row g-4">
            <div class="col-md-3">
              <div class="card bg-slate-800">
                <div class="card-body">
                  <h5 class="card-title">Contacts</h5>
                  <ul class="list-group list-group-flush" id="contactsList">
                    <li class="list-group-item bg-slate-900 text-slate-300 small">
                      No contacts yet.
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-9">
              <div class="card bg-slate-800 h-100">
                <div class="card-body d-flex flex-column">
                  <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="card-title mb-0" id="smsConversationTitle">Select a contact</h5>
                  </div>
                  <div id="smsMessages" class="flex-grow border border-slate-700 rounded p-3 mb-3 overflow-auto" style="max-height: 350px;">
                  </div>
                  <form id="smsForm" class="d-flex gap-2">
                    <input type="text" class="form-control" id="smsFrom" placeholder="From (your Telnyx number)" />
                    <input type="text" class="form-control" id="smsTo" placeholder="To (recipient number)" />
                    <input type="text" class="form-control" id="smsText" placeholder="Type a message" />
                    <button class="btn btn-primary" type="submit">Send</button>
                  </form>
                  <p id="smsStatus" class="small mt-2 text-slate-300"></p>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <script src="./js/api.js"></script>
  <script src="./js/dashboard.js"></script>
</body>
</html>
